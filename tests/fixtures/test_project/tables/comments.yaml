tables:
  - name: comments
    description: A table for comments
    columns:
      - name: id
        data_type: integer
        generator: primary_key.incrementing_id
      - name: post_id
        data_type: integer
        generator: foreign_key.key
        options:
          reference: "${ref:posts.id}"
      - name: user_id
        data_type: integer
        generator: foreign_key.key
        options:
          reference: "${ref:users.id}"
      - name: user_full_name
        data_type: string
        generator: foreign_key.value
        options:
          reference: "${ref:users.full_name}"
      - name: content
        data_type: string
        generator: llm.generate
        options:
          prompt: "Generate a comment for the post {{ references.posts.title }}."
      - name: created_at
        data_type: datetime
        generator: datetime.random
        options:
          start_date: "${ref:posts.created_at}"
          end_date: "2025-01-01"
    references:
      - type: table
        name: posts
        relationship: one_to_one
      - type: table
        name: users
        relationship: one_to_one
