version: 0.0.1

tables:
  - name: comments_data
    description: A table for comments
    alias: comments
    columns:
      - name: id
        data_type: integer
        generator: primary_key.incrementing_id
      - name: post_id
        data_type: integer
        generator: foreign_key.key
        options:
          reference: "${ref:posts_data.id}"
      - name: user_id
        data_type: integer
        generator: foreign_key.key
        options:
          reference: "${ref:users_data.id}"
      - name: user_full_name
        data_type: string
        generator: foreign_key.value
        options:
          reference: "${ref:users_data.full_name}"
      - name: content
        data_type: string
        generator: llm.generate
        options:
          prompt: "Generate a comment for the post {{ references.posts_data.title }}."
      - name: created_at
        data_type: datetime
        generator: datetime.random
        options:
          start_date: "${ref:posts_data.created_at}"
          end_date: "2025-01-01"
    references:
      - table: posts_data
        relationship: one_to_one
      - table: users_data
        relationship: one_to_one